---
title: 告警策略
slug: /user-manual/cluster/alarm-policy
tags:
  - API7 Enterprise
---

## 新建告警策略
#### 使用场景

当 API7 Enterprise 网关本身或 API 的监控指标发生异常时，通知相关人员，方便快速响应。

#### 使用限制

需要安装Prometheus,AlertManager,OpenSearch几个组件。

#### 操作步骤

**步骤1**： 登录 API7 Enterprise 控制台。

**步骤2**： 在顶部导航菜单，点击`集群管理`。

**步骤3**： 在左侧菜单，点击`集群列表`。

**步骤4**： 点击对应集群的`访问`按钮。

**步骤5**： 如果需要监控告警的对象是整个集群（集群内所有 API，及数据面节点），在左侧菜单，点击`告警管理-告警策略`，跳过步骤6~8.

**步骤6**： 在左侧菜单，点击`工作分区`。

**步骤7**： 点击对应工作分区的`访问`按钮。

**步骤8**： 在左侧菜单，点击`告警管理-告警策略`。

**步骤9**： 点击`新建`按钮。

**步骤10**：根据[名词解释](https://docs.apiseven.com/enterprise/background-information/glossary#%E4%B8%8A%E6%B8%B8)，填写表单。

**步骤11**： 点击`提交`按钮。

**验证方式**：在告警策略列表中，可以看到新建的告警策略记录。此时未配置通知模板，还未完全生效。

## 配置告警策略
#### 使用场景

修改告警策略的属性。

#### 使用限制

1. 配置成功后，直到下一个告警检查周期，才会按新的配置生效。正在进行中的告警任务不会被打断会修改。

#### 操作步骤

**步骤1**： 登录 API7 Enterprise 控制台。

**步骤2**： 在顶部导航菜单，点击`集群管理`。

**步骤3**： 在左侧菜单，点击`集群列表`。

**步骤4**： 点击对应集群的`访问`按钮。

**步骤5**： 如果需要监控告警的对象是整个集群（集群内所有 API，及数据面节点），在左侧菜单，点击`告警管理-告警策略`，跳过步骤6~8.

**步骤6**： 在左侧菜单，点击`工作分区`。

**步骤7**： 点击对应工作分区的`访问`按钮。

**步骤8**： 在左侧菜单，点击`告警管理-告警策略`。

**步骤8**： 点击对应告警策略的`配置`按钮。

**步骤9**： 编辑告警策略的属性。

**步骤10**： 点击`提交`按钮。

**验证方式**：新的告警策略从下一个周期开始生效。

## 删除告警策略
#### 使用场景

永久停止告警策略并删除记录。

#### 使用限制

状态为”开启“和”暂停“的告警策略都可以被删除。

#### 操作步骤

**步骤1**： 登录 API7 Enterprise 控制台。

**步骤2**： 在顶部导航菜单，点击`集群管理`。

**步骤3**： 在左侧菜单，点击`集群列表`。

**步骤4**： 点击对应集群的`访问`按钮。

**步骤5**： 如果需要监控告警的对象是整个集群（集群内所有 API，及数据面节点），在左侧菜单，点击`告警管理-告警策略`，跳过步骤6~8.

**步骤6**： 在左侧菜单，点击`工作分区`。

**步骤7**： 点击对应工作分区的`访问`按钮。

**步骤8**： 在左侧菜单，点击`告警管理-告警策略`。

**步骤8**： 点击对应告警策略的`删除`按钮。

**步骤9**： 点击`确认`按钮。

**验证方式**：访问目标 API，全部请求转发到当前上游。

## 全量发布
#### 使用场景

验证发现目标上游符合预期且运行稳定，将目标 API 的全部请求转发到目标上游，替换路由/ API 中的上游配置。

#### 使用限制

1. 仅状态为”进行中“的任务都可以被全量发布。

#### 操作步骤

**步骤1**： 登录 API7 Enterprise 控制台。

**步骤2**： 在顶部导航菜单，点击`集群管理`。

**步骤3**： 在左侧菜单，点击`集群列表`。

**步骤4**： 点击对应集群的`访问`按钮。

**步骤5**： 在左侧菜单，点击`工作分区`。

**步骤6**： 点击对应工作分区的`访问`按钮。

**步骤7**： 在左侧菜单，点击`API 管理-发布管理`。

**步骤8**： 点击对应任务的`更多`下拉菜单，然后点击`全量发布`按钮。

**步骤9**： 点击`确认`按钮。

**验证方式**：访问目标 API，全部请求转发到目前上游；跳转到目标 API 的详情中，上游已经更新为目标上游。

